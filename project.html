<!DOCTYPE html>
<html>
  <body>
    <button id="start">Start Mirroring</button>
    <video id="preview" autoplay playsinline style="width:100%"></video>

    <script>
      const btn = document.getElementById('start');
      const video = document.getElementById('preview');

      btn.addEventListener('click', async () => {
        // hide the button immediately
        btn.style.display = 'none';

        // capture only browser/tab surfaces
        const stream = await navigator.mediaDevices.getDisplayMedia({
          video: {
            displaySurface: 'browser',   // only browser contexts
            logicalSurface: true,        // lets it capture the tabâ€™s content
            cursor: 'never'
          }
        });

        // show the live mirror
        video.srcObject = stream;
      });
    </script>

    <!-- include Region Capture polyfill if you want element cropping -->
    <script src="https://unpkg.com/@w3c/mediacapture-region/dist/mediacapture-region.js"></script>
  </body>
</html>
